// Copyright ⓒ 1998~2017 Incruit Corporation All rights reserved

var thisLocationArray=location.href.split("//");var domainThis=thisLocationArray[1];domainThis=domainThis.split("/");domainThis=domainThis[0];;(function($){$.scrapcompany=function(obj,param,options){var $this=$(obj);ga('send','event','web_companywishlist','click');param.act="CI";if($this.attr("f_scrapcompany")=="on")param.act="CD";if(window._gaq)_gaq.push(['_trackEvent','interest company',document.location.pathname,document.location.search]);$.ajax({type:"POST",url:"/g_common/bizcommon/v2/inc_scrapcompany_ajax.asp",data:param,success:function(msg){if(!msg)return;var rtn=eval('('+msg+')');var err=rtn.error;var errmsg=rtn.errmsg;var tempHtml=rtn.result;if(err=="9"){alert(errmsg);}else if(err=="1000"){if(options.layerlogin)options.layerlogin();else{var url=document.URL;if($this.attr("f_target")=="job_layer"){url=url+"&utm_source=incruit&utm_medium=banner&utm_campaign=interesting_%20layer"}
if(url.indexOf("m.incruit.com")>-1)
location.href=G_HOSTNAME_EDIT+"/login/loginmobile.asp?gotoURL="+escape(url);else if(url.indexOf("m.alba.incruit.com")>-1)
location.href=G_HOSTNAME_EDIT+"/login/loginmobile.asp?gotoURL="+escape(url);else
var url=document.URL;if(url.indexOf("job.incruit.com/jobdb_info/popupjobpost.asp")>-1){iNcruitLayerLogin.show('scrap');}else{location.href=G_HOSTNAME_EDIT+"/login/login.asp?gotoURL="+escape(url);}}}
else if(err=="2000"){alert(errmsg);}else{if($this.attr("f_scrapcompany")=="on"){$this.attr("f_scrapcompany","off").removeClass("on");if(options.success)options.success("off");if(options.count)options.count($this,"off");if(jQuery.cookie("addCompanyTooltip")!="shown"){$(".addCompanyTooltip").show();}
$("button.btn_add[f_mem='"+param.mem+"']").removeClass("on").addClass("off").attr("f_scrapcompany","off");var val_right=$("em#job_Cls_Srcomp_Cnt").text().replace('(','').replace(')','').replace(',','');$("em#job_Cls_Srcomp_Cnt").text("("+(parseInt(val_right)-1)+")");var $CurScrapComp=$("button[f_mem='"+param.mem+"']").parent("p.ban_wish");if($CurScrapComp.size()>0){$CurScrapComp.removeClass("on").addClass("off");var cnt=$("em[id=job_srcomp_cnt]:eq(0)").text().replace('(','').replace(')','').replace(',','');if(cnt=='')return;if(!cnt.isNumeric())return;var intcnt=parseInt(cnt)-1;var stringcnt='('+putCommaStr(intcnt.toString())+')';$("em[id=job_srcomp_cnt]").text(stringcnt);$("em[id=job_Cls_Srcomp_Cnt]").text(stringcnt);}
if(jQuery("#wish_corp_top").attr("f_mem")==$this.attr("f_mem")){jQuery("#wish_corp_top").removeClass("on");jQuery("#wish_corp_middle").removeClass("on");jQuery("#wish_corp_bottom").removeClass("on");}
jQuery("#btnScrapCompany").attr("flag","add").removeClass("on");try{if(typeof $(".jobview-slider .slick-active button.btns_wishs")[0]!="undefined"){$(".jobview-slider .slick-active button.btns_wishs").removeClass("on");}}catch(e){}}else{$this.attr("f_scrapcompany","on").addClass("on");$this.unbind("mouseleave");$('#divScrapCompLayer').fadeOut('slow');if(options.resultView)scrapcompanyLayerOpen($this,rtn,options);if(options.success)options.success("on");if(options.count)options.count($this,"on");$(".addCompanyTooltip").hide();$this.mouseleave(function(){if($this.attr("f_scrapcompany")!='on'){$this.removeClass("on").addClass("off");}
$("#divScrapCompLayer").fadeOut("slow");});$("button.btn_add[f_mem='"+param.mem+"']").removeClass("off").addClass("on").attr("f_scrapcompany","on");var val_right=$("em#job_Cls_Srcomp_Cnt").text().replace('(','').replace(')','').replace(',','');$("em#job_Cls_Srcomp_Cnt").text("("+(parseInt(val_right)+1)+")");$("button.btn_add[f_mem='"+param.mem+"']").removeClass("off").addClass("on").attr("f_scrapcompany","on");var $CurScrapComp=$("button[f_mem='"+param.mem+"']").parent("p.ban_wish");if($CurScrapComp.size()>0){$CurScrapComp.removeClass("off").addClass("on");var cnt=$("em[id=job_srcomp_cnt]:eq(0)").text().replace('(','').replace(')','').replace(',','');if(cnt=='')cnt='0';if(!cnt.isNumeric())return;var intcnt=parseInt(cnt)+1;var stringcnt='('+putCommaStr(intcnt.toString())+')';$("em[id=job_srcomp_cnt]").text(stringcnt);$("em[id=job_Cls_Srcomp_Cnt]").text(stringcnt);}
if(jQuery("#wish_corp_top").attr("f_mem")==$this.attr("f_mem")){jQuery("#wish_corp_top").addClass("on");jQuery("#wish_corp_middle").addClass("on");jQuery("#wish_corp_bottom").addClass("on");}
jQuery("#btnScrapCompany").attr("flag","del").addClass("on");if(!$this.hasClass("wish")){if(jQuery.cookie("appdownloadLayer1DayHide")==null){if(typeof PROMOTION!='undefined'){PROMOTION.appDownload("<strong>지금 관심기업으로 등록하신 기업의 채용 일정을 누구보다 빨리 알 수 있는 방법<em>!</em></strong><p>인크루트 앱을 다운로드 하시면<br>스크랩하신 공고의 일정을 PUSH 로 알려드립니다.</p>","bdyJobPost");}}}
fnShowAppLayer("appdwnlayer_scrpCompCnt");try{if(typeof $(".jobview-slider .slick-active button.btns_wishs")[0]!="undefined"){$(".jobview-slider .slick-active button.btns_wishs").addClass("on");}}catch(e){}}}}});};function scrapcompanyLayerOpen($obj,rtn,options){$.scrapcompanyLayerClose();var element=$("<div/>").hide().attr("id","divScrapCompany").addClass('ScrapCompanyWrap').html($(rtn.result)).appendTo($obj.parent().parent()).css("position","absolute").css("right","0");if(options.layerTop){element.css("top",options.layerTop+20)}
element.addClass('show');}
$.scrapcompanyLayerClose=function(){$('#divScrapCompany').remove();};$.fn.scrapcompany=function(args){var opts=$.extend({},$.fn.scrapcompany.defaults,args);var list="";this.each(function(){var attr=$(this).attr("f_mem");if(attr)list+=","+$(this).attr("f_mem");});var buttons=this;if(window.document.cookie.indexOf("IsPersonal=Y")>0){if(list.length>0){list=list.substring(1);var param={act:'CKL',memgi_list:list};$.ajax({type:"POST",url:"/g_common/bizcommon/v2/inc_scrapcompany_ajax.asp",data:param,success:function(msg){if(!msg)return;try{if(msg!=""){var arrRS=msg.split(",");for(var i=0;i<=(arrRS.length-1);i++){buttons.filter("[f_mem='"+arrRS[i]+"']").attr("f_scrapcompany","on").addClass("on");buttons.filter("[f_mem='"+arrRS[i]+"']").parent("p.ban_wish").removeClass("off").addClass("on");$("button[id='btnScrapComp']").removeClass("off").addClass("on");$("span[id='spnScrapComp']").removeClass("off").addClass("on");$(".addCompanyTooltip").hide();}}}catch(ex){}}});}}
return this.each(function(e){var $this=$(this);if($this.attr("f_scrapcompany")=="on")
$this.attr("f_act","CD");else
$this.attr("f_act","CI");if(opts.comp)$this.attr("f_comp",opts.comp);if(opts.mem)$this.attr("f_mem",opts.mem);$this.click(function(e){e.stopPropagation();var param=new Object();var options=new Object();param.act=$this.attr("f_act");if($this.attr("f_comp"))param.comp=$this.attr("f_comp");if($this.attr("f_mem"))param.mem=$this.attr("f_mem");if(opts.success)options.success=opts.success;if(opts.layerlogin)options.layerlogin=opts.layerlogin;if(opts.count)options.count=opts.count;options.resultView=opts.resultView;options.layerTop=opts.layerTop;$.scrapcompany(this,param,options);});});};$.fn.scrapcompany.defaults={resultView:false,layerTop:""};$.scrapcompanygroup=function(obj,param,options){var $this=$(obj);param.act="CGI";if($this.attr("f_scrapcompany")=="on")param.act="CGD";$.ajax({type:"POST",url:"/g_common/bizcommon/v2/inc_scrapcompany_ajax.asp",data:param,success:function(msg){if(!msg)return;var rtn=eval('('+msg+')');var err=rtn.error;var errmsg=rtn.errmsg;var tempHtml=rtn.result;if(err=="9"){alert(errmsg);}else if(err=="1000"){if(options.layerlogin)options.layerlogin();else{var url=document.URL;if(url.indexOf("m.incruit.com")>-1)
location.href=G_HOSTNAME_EDIT+"/login/loginmobile.asp?gotoURL="+escape(url);else if(url.indexOf("m.alba.incruit.com")>-1)
location.href=G_HOSTNAME_EDIT+"/login/loginmobile.asp?gotoURL="+escape(url);else
location.href=G_HOSTNAME_EDIT+"/login/login.asp?gotoURL="+escape(url);}}
else if(err=="2000"){alert(errmsg);}else{if($this.attr("f_scrapcompany")=="on"){$this.attr("f_scrapcompany","off").removeClass("on");if(options.success)options.success("off");$this.bind('mouseover',function(){$(this).addClass("on")});$this.bind('mouseleave',function(){$(this).removeClass("on")});}else{$this.attr("f_scrapcompany","on").addClass("on");$this.unbind("mouseleave mouseover");if(options.resultView)scrapcompanyLayerOpen($this,rtn,options);if(options.success)options.success("on");}}}});};jQuery.fn.scrapgroupcompany=function(args){var opts=jQuery.extend({},jQuery.fn.scrapgroupcompany.defaults,args);var list="";this.each(function(){var attr=jQuery(this).attr("f_groupcd");if(attr)list+=","+jQuery(this).attr("f_groupcd");});var buttons=this;if(list.length>0){list=list.substring(1);var param={act:'CGM',groupcompcd:list};jQuery.ajax({type:"POST",url:"/g_common/bizcommon/v2/inc_scrapcompany_ajax.asp",data:param,success:function(msg){if(!msg)return;try{if(msg!=""){var arrRS=msg.split("###");for(var i=0;i<=(arrRS.length-1);i++){buttons.filter("[f_groupcd='"+arrRS[i]+"']").attr("f_scrapcompany","on").addClass("on");}}}catch(ex){}}});}
return this.each(function(){var $this=jQuery(this);if($this.attr("f_scrapcompany")=="on")
$this.attr("f_act","CD");else
$this.attr("f_act","CGI");if(opts.comp)$this.attr("f_comp",opts.comp);if(opts.mem)$this.attr("f_mem",opts.mem);$this.click(function(){var param=new Object();var options=new Object();param.act=$this.attr("f_act");if($this.attr("f_comp"))param.comp=$this.attr("f_comp");if($this.attr("f_mem"))param.mem=$this.attr("f_mem");if($this.attr("f_compnm"))param.compnm=$this.attr("f_compnm");if($this.attr("f_groupcd"))param.groupcd=$this.attr("f_groupcd");if(opts.success)options.success=opts.success;if(opts.before)options.before=opts.before;if(opts.after)options.after=opts.after;if(opts.layerlogin)options.layerlogin=opts.layerlogin;if(opts.count)options.count=opts.count;options.resultView=opts.resultView;options.layerTop=opts.layerTop;$.scrapgroupcompany(this,param,options);});});};jQuery.fn.scrapgroupcompany.defaults={resultView:false,layerTop:""};jQuery.scrapgroupcompany=function(obj,param,options){if(typeof options.before=="function"){options.before();}
var $this=$(obj);var strAct,strGroupCd
var param;strGroupCd=$this.attr("f_groupcd");if($this.attr("f_groupcd")==""){if($this.attr("f_scrapcompany")=="on")strAct="CD"
else strAct="CI"}
else{strAct="CGI";}
if($this.attr("f_scrapcompany")=="on"){alert("이미 회원님의 관심그룹으로 등록되어 있습니다.");if(typeof options.after=="function"){options.after();}}else{param={act:strAct,compnm:escape($this.attr("f_compnm")),groupcompcd:strGroupCd,memgi:$this.attr("f_groupcd"),comp:$this.attr("f_comp")};$.ajax({type:"POST",url:"/g_common/bizcommon/v2/inc_scrapcompany_ajax.asp",data:param,success:function(msg){if(strAct=="CGI"){if(msg!=""){errtmp=msg.split("###");err=errtmp[0];errmsg=errtmp[1];strInstrCnt=errtmp[2];strNuguInfoScrapComList=errtmp[3];if(err=="0"){if(strInstrCnt>0){jQuery("#job_srcomp_cnt"+strGroupCd).html('');jQuery("#job_srcomp_cnt"+strGroupCd).html(strInstrCnt);}
jQuery("#btScrapCompany"+strGroupCd).addClass("on");jQuery("button#btScrapCompany.group30Company").attr("f_scrapcompany","on");jQuery("button#btScrapCompany.group30Company").addClass("on");alert($this.attr("f_compnm")+"을(를) 회원님의 관심그룹으로 등록했습니다.\n\n"+$this.attr("f_compnm")+"의 공채정보 및 각종 취업자료를\n내소식,메일 등을 통해 실시간으로 받아보실 수 있습니다.");if(typeof options.success=="function"){options.success();}}
else if(err=="1000"){var url=document.URL;if(url.indexOf("m.incruit.com")>-1)
location.href=G_HOSTNAME_EDIT+"/login/loginmobile.asp?gotoURL="+escape(url);else if(url.indexOf("m.alba.incruit.com")>-1)
location.href=G_HOSTNAME_EDIT+"/login/loginmobile.asp?gotoURL="+escape(url);else
location.href=G_HOSTNAME_EDIT+"/login/login.asp?gotoURL="+escape(url);}
else if(err=="2000"){alert("기업은 관심기업을 등록하실 수 없습니다.");}
else{alert("사용자 많아 등록에 실패하였습니다.\n잠시후에 다시 시도해 주십시요");}}}
else{if(msg!=""){errtmp=msg.split("###");if(strAct=="CI"){err=errtmp[0];errmsg=errtmp[1];strInstrCnt=errtmp[2];strNuguInfoScrapComList=errtmp[3];}
if(err=="0"){jQuery("#job_srcomp_cnt"+$this.attr("f_groupcd")).html('');jQuery("#job_srcomp_cnt"+$this.attr("f_groupcd")).html(strInstrCnt);jQuery("#btScrapCompany"+$this.attr("f_groupcd")).addClass("on");alert($this.attr("f_compnm")+"을(를) 회원님의 관심기업으로 등록했습니다.");if(strMode=="3"){totalCnt=jQuery("#span0_cnt").html();jQuery("#span0_cnt").html(parseInt(totalCnt)+1);}}
else if(err=="1000"){var url=document.URL;if(url.indexOf("m.incruit.com")>-1)
location.href=G_HOSTNAME_EDIT+"/login/loginmobile.asp?gotoURL="+escape(url);else if(url.indexOf("m.alba.incruit.com")>-1)
location.href=G_HOSTNAME_EDIT+"/login/loginmobile.asp?gotoURL="+escape(url);else
location.href=G_HOSTNAME_EDIT+"/login/login.asp?gotoURL="+escape(url);}
else if(err=="2000"){alert("기업은 관심기업을 등록하실 수 없습니다.");}
else{alert("사용자 많아 등록에 실패하였습니다.\n잠시후에 다시 시도해 주십시요");}}}
if(typeof options.after=="function"){options.after();}}});}};})(jQuery);